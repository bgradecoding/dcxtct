// npm 설치

npm i react-router-dom

npm i @material-ui/core




//화면 띄우기

npm run start





// 페이지 수를 보고 페이지 만큼 js 파일 만들기
// 서버 통신을 위한 axios baseService 만들기


src
  ㄴpages
   ㄴpage1.js
   ㄴpage2.js
  ㄴservice
   ㄴbaseService.js




//baseService.js   내용



import axios from "axios";

export default class BaseService {

  static getInstance() {
    if (!BaseService.instance) {
      BaseService.instance = new BaseService();
    }
    return BaseService.instance;
  }

  config={
    method: 'GET',
    url: '',
    headers: {'Content-Type':'application/json'},
    data: {}
  }

  async fnRest(method, url, requestBody){
    
    this.config.method = method
    
    this.config.url = 'http://localhost:3300/users/' + url    //문제 url 넣기

    this.config.data = requestBody

    try {

      console.log("axios request url : " + url + ", requestBody : " + requestBody)
      
      const response = await axios.request(this.config)
      console.log('server response -----'+JSON.stringify(response.data))
      if (response.status === 200) {
        return response.data
      } else {
        const noResponseError = {
          successOrNot: 'N',
          statusCode: 'NO.RESPONSE',
          data: {}
        }
        throw noResponseError
      }
    } catch (errorResponse) {
      if (errorResponse && (errorResponse).error) {
        const errors = {
          successOrNot: 'N',
          statusCode: 'ERROR.RESPONSE',
          data: errorResponse.data
        }
        throw errors
      } else {
        const unknownError= {
          successOrNot: 'N',
          statusCode: 'UNKNOWN.SERVER',
          data: {}
        }
        throw unknownError
      }
    }
  }


}








//page1.js 내용

import React, { useEffect, useState } from 'react'
import BaseService from '../service/baseService'


function Page1() {

    const baseService = BaseService.getInstance()
    async function init(){
        const result = await baseService.fnRest('', '', '')
    }
    const [count, setCount] = useState(0);
    
    

    useEffect(()=>{
        init()
    }, [] )

    return (
        <div>page1</div>
    )
}

export default Page1











//page2.js 내용

import React from 'react'

export default function Page2(){

    return (
        <div>page2</div>
    )
}










// App.js 수정


import React from 'react';
import Page1 from './pages/Page1';
import Page2 from './pages/Page2';
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';

function App() {
  return (
    <Router>
      <Switch>
      <Route path="/" exact component={Page1}/>
      <Route path="/page2" component={Page2}/>
      </Switch>
    </Router>
  );
}

export default App;





// default url에서 http://localhost:3000/        page1
// 서버 호출을 문제 스펙에 맞게 해서 page1에서 호출이 잘 되는지 확인한다.

// default url에서 http://localhost:3000/page2   page2
// Page 잘 보여지는지 확인


